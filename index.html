<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Generate random PNG, JPEG, GIF, SVG or text files with exact size and dimensions">
  <meta name="keywords" content="image generator, text file generator, PNG size generator, random file generator">
  <meta name="author" content="dionisiy13@gmail.com">
  <meta http-equiv="Cache-Control" content="max-age=300, must-revalidate">
  <meta http-equiv="Pragma" content="cache">
  <meta http-equiv="Expires" content="300">
  <title>Random File Generator (Exact Size)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "ucvn1c2e9w");
</script>
</head>
<body class="bg-light">
<div class="container mt-5">
  <div class="card shadow-lg">
    <div class="card-body">
      <h3 class="card-title text-center mb-4">File Generator (Exact Size)</h3>
      <div class="mb-3">
        <label class="form-label">File Type:</label>
        <select id="fileType" class="form-select" onchange="toggleDimensions()">
          <option value="png">PNG</option>
          <option value="jpeg">JPEG</option>
          <option value="gif">GIF</option>
          <option value="svg">SVG</option>
          <option value="txt">TXT</option>
        </select>
      </div>
      <div class="mb-3" id="widthGroup">
        <label class="form-label">Width (px):</label>
        <input type="number" class="form-control" id="w" value="300">
      </div>
      <div class="mb-3" id="heightGroup">
        <label class="form-label">Height (px):</label>
        <input type="number" class="form-control" id="h" value="300">
      </div>
      <div class="mb-3">
        <label class="form-label">Target File Size (KB):</label>
        <input type="number" class="form-control" id="kb" value="300" max="2097152">
      </div>
      <div class="d-grid mb-3">
        <button onclick="generateFile()" class="btn btn-primary">Generate File</button>
      </div>
      <div class="progress" style="height: 20px;">
        <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%">0%</div>
      </div>
      <p class="text-center mt-3" id="fileSizePreview"></p>
         <div class="text-center" style="font-size: 9pt;"><p>Made by <a href="https://www.linkedin.com/in/denys-kurasov/" target="_blank">Denys Kurasov</a> hands</p></div>
    </div>

  </div>
</div>

<script>
function toggleDimensions() {
  const fileType = document.getElementById("fileType").value;
  const isText = fileType === "txt";
  document.getElementById("widthGroup").style.display = isText ? "none" : "block";
  document.getElementById("heightGroup").style.display = isText ? "none" : "block";
}

toggleDimensions();

async function generateFile() {
  const fileType = document.getElementById("fileType").value;
  const width = parseInt(document.getElementById("w").value);
  const height = parseInt(document.getElementById("h").value);
  const sizeKBInput = parseInt(document.getElementById("kb").value);
  const progressBar = document.getElementById("progressBar");
  const fileSizePreview = document.getElementById("fileSizePreview");

  if (sizeKBInput > 2097152) {
    alert("Maximum allowed size is 2 GB (2097152 KB)");
    return;
  }

  const sizeBytes = sizeKBInput * 1024;
  progressBar.style.width = '0%';
  progressBar.textContent = '0%';
  fileSizePreview.textContent = '';

  let blob;
  let fileExt = fileType;

  if (["png", "jpeg", "gif"].includes(fileType)) {
    const canvas = document.createElement("canvas");
    canvas.width = width;
    canvas.height = height;
    const ctx = canvas.getContext("2d");
    const imgData = ctx.createImageData(width, height);

    for (let i = 0; i < imgData.data.length; i += 4) {
      imgData.data[i] = Math.random() * 255;
      imgData.data[i+1] = Math.random() * 255;
      imgData.data[i+2] = Math.random() * 255;
      imgData.data[i+3] = 255;
    }

    ctx.putImageData(imgData, 0, 0);
    blob = await new Promise(resolve => canvas.toBlob(resolve, `image/${fileType}`));

  } else if (fileType === "svg") {
    const color = `rgb(${rand255()},${rand255()},${rand255()})`;
    const xmlDecl = `<?xml version='1.0' encoding='UTF-8'?>`;
    const svgOpen = `<svg xmlns='http://www.w3.org/2000/svg' width='${width}' height='${height}'>`;
    const svgContent = `<rect width='100%' height='100%' fill='${color}'/>`;
    const svgClose = `</svg>`;

    const fillerUnit = '<!--x-->';
    const base = xmlDecl + svgOpen + svgContent;
    const remaining = sizeBytes - (base.length + svgClose.length);
    const fillerCount = Math.max(0, Math.floor(remaining / fillerUnit.length));
    const filler = fillerUnit.repeat(fillerCount);

    const svgString = base + filler + svgClose;
    blob = new Blob([svgString], { type: 'image/svg+xml' });

  } else if (fileType === "txt") {
    let content = '';
    while (content.length < sizeBytes) content += Math.random().toString(36).substring(2);
    const finalText = content.substring(0, sizeBytes);
    blob = new Blob([finalText], { type: 'text/plain' });
  }

  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = `generated.${fileExt}`;
  a.click();
  URL.revokeObjectURL(url);

  progressBar.style.width = '100%';
  progressBar.textContent = '100%';
  fileSizePreview.textContent = `Generated file size: ${(blob.size / 1024).toFixed(2)} KB`;
}

function rand255() {
  return Math.floor(Math.random() * 256);
}
</script>
</body>
</html>
